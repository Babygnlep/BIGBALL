<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BIGBALL</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Kanit',sans-serif;
  background:radial-gradient(circle at top,#0e1a33,#05070d 70%);
  color:#fff;
}

/* topbar */
.topbar{
  display:flex;
  background:linear-gradient(180deg,#123a73,#0b254f);
}
.topbar button{
  flex:1;
  padding:14px;
  background:none;
  border:none;
  color:#cfe0ff;
  font-family:'Kanit';
  cursor:pointer;
}
.topbar button.active{
  background:#0d2f63;
  color:#fff;
  font-weight:500;
}

/* layout */
.container{
  max-width:420px;
  margin:30px auto;
  padding:0 14px;
}
.page{display:none}
.page.active{display:block}

/* card */
.card{
  background:linear-gradient(180deg,#0f1e3d,#0a142b);
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
}
h4{margin:0 0 10px;font-weight:500}

input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
  font-family:'Kanit';
}

.stock-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.controls{
  display:flex;
  gap:6px;
}

.controls button{
  width:32px;
  height:32px;
  border-radius:8px;
  border:none;
  font-size:18px;
  cursor:pointer;
}

.plus{background:#1b47ff;color:#fff}
.minus{background:#e5e5e5;color:#000}

.main{
  width:100%;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#123dff;
  color:#fff;
  font-size:14px;
  cursor:pointer;
  margin-top:10px;
}

.badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:20px;
  font-size:12px;
  margin-bottom:6px;
}
.pending{background:#ca8a04;color:#000}
.paid{background:#16a34a}

.bill-meta{
  font-size:13px;
  opacity:.7;
  margin-bottom:6px;
}
.bill-item{
  font-size:14px;
  margin-bottom:4px;
}
.bill-actions{
  margin-top:10px;
  display:flex;
  gap:8px;
}
.bill-actions button{
  flex:1;
}
</style>
</head>

<body>

<div class="topbar">
  <button onclick="showPage('stock')" class="active">üì¶ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤</button>
  <button onclick="showPage('out')">üì§ ‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡∏Å</button>
  <button onclick="showPage('bill')">üßæ ‡∏ö‡∏¥‡∏•</button>
</div>

<div class="container">

<!-- STOCK -->
<section id="page-stock" class="page active">
  <div class="card">
    <input id="newItemName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå">
    <input id="newItemQty" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô">
    <button class="main" onclick="addStock()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
  </div>
  <div class="card" id="stockList"></div>
</section>

<!-- OUT -->
<section id="page-out" class="page">
  <div class="card">
    <input id="billName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏¥‡∏• / ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤">
    <input id="billDate" type="date">
    <input id="billPrice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)">
  </div>

  <div class="card">
    <h4>üì¶ ‡∏™‡∏ï‡πä‡∏≠‡∏Å</h4>
    <div id="outStock"></div>
  </div>

  <div class="card">
    <h4>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ö‡∏¥‡∏•</h4>
    <div id="outBill"></div>
  </div>

  <button class="main" onclick="confirmBill()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ö‡∏¥‡∏•</button>
</section>

<!-- BILL -->
<section id="page-bill" class="page">
  <h4>‚è≥ ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢</h4>
  <div id="pendingBills"></div>

  <h4>‚úÖ ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</h4>
  <div id="paidBills"></div>
</section>

</div>

<script>
let items = JSON.parse(localStorage.getItem('items')) || [];
let bills = JSON.parse(localStorage.getItem('bills')) || [];
let outItems = [];

billDate.value = new Date().toISOString().split('T')[0];

function showPage(p){
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.topbar button').forEach(x=>x.classList.remove('active'));
  document.getElementById('page-'+p).classList.add('active');
  document.querySelectorAll('.topbar button')[{stock:0,out:1,bill:2}[p]].classList.add('active');
}

function addStock(){
  const n=newItemName.value.trim();
  const q=Number(newItemQty.value);
  if(!n||q<=0) return;
  items.push({name:n,qty:q});
  save(); render();
  newItemName.value=''; newItemQty.value='';
}

function addOut(i){
  if(items[i].qty<=0) return;
  items[i].qty--;
  const b=outItems.find(x=>x.name===items[i].name);
  b?b.qty++:outItems.push({name:items[i].name,qty:1});
  save(); render();
}

function removeOut(i){
  const b=outItems[i];
  const it=items.find(x=>x.name===b.name);
  it.qty++; b.qty--;
  if(b.qty<=0) outItems.splice(i,1);
  save(); render();
}

function confirmBill(){
  if(outItems.length===0) return alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á');
  bills.push({
    billName: billName.value||'‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏',
    date: billDate.value,
    price: Number(billPrice.value)||0,
    status:'pending',
    items: JSON.parse(JSON.stringify(outItems))
  });
  outItems=[];
  save(); render();
  showPage('bill');
}

function markPaid(i){bills[i].status='paid';save();render();}
function clearBill(i){
  bills[i].items.forEach(b=>{
    const it=items.find(x=>x.name===b.name);
    if(it) it.qty+=b.qty;
  });
  bills.splice(i,1); save(); render();
}

function render(){
  stockList.innerHTML='';
  outStock.innerHTML='';
  outBill.innerHTML='';
  pendingBills.innerHTML='';
  paidBills.innerHTML='';

  items.forEach((it,i)=>{
    stockList.innerHTML+=`
      <div class="stock-item">
        <div>${it.name} (${it.qty})</div>
        <div class="controls">
          <button class="plus" onclick="it.qty++;save();render()">+</button>
          <button class="minus" onclick="it.qty>0&&(it.qty--,save(),render())">‚àí</button>
        </div>
      </div>`;
    outStock.innerHTML+=`
      <div class="stock-item">
        <div>${it.name} (${it.qty})</div>
        <button class="plus" onclick="addOut(${i})">+</button>
      </div>`;
  });

  outItems.forEach((it,i)=>{
    outBill.innerHTML+=`
      <div class="stock-item">
        <div>${it.name} √ó ${it.qty}</div>
        <button class="minus" onclick="removeOut(${i})">‚àí</button>
      </div>`;
  });

  bills.forEach((b,i)=>{
    const html=`
      <div class="card">
        <div class="badge ${b.status}">${b.status==='paid'?'‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß':'‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢'}</div>
        <div><b>${b.billName}</b></div>
        <div class="bill-meta">${b.date} ‚Ä¢ ${b.price} ‡∏ö‡∏≤‡∏ó</div>
        ${b.items.map(it=>`<div class="bill-item">‚Ä¢ ${it.name} √ó ${it.qty}</div>`).join('')}
        <div class="bill-actions">
          ${b.status==='pending'?`<button class="main" onclick="markPaid(${i})">‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</button>`:''}
          <button class="main" onclick="clearBill(${i})">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ö‡∏¥‡∏•</button>
        </div>
      </div>`;
    b.status==='paid'?paidBills.innerHTML+=html:pendingBills.innerHTML+=html;
  });
}

function save(){
  localStorage.setItem('items',JSON.stringify(items));
  localStorage.setItem('bills',JSON.stringify(bills));
}
render();
</script>

</body>
</html>
